[TOC]

# 适配器模式

## 目的

解决由于接口不能兼容而导致类无法使用的问题,适配器模式会将适配的类转换成调用者能够使用的目标接口. 

 **适配器模式把一个类的接口变换成客户端所期待的另一种接口，从而使原本因接口不匹配而无法在一起工作的两个类能够在一起工作** 

## 角色

目标接口(Target):调用者能够直接使用的接口.

需要适配的类(Adaptee):被适配者,一般情况下,Adaptee类中有真正的业务逻辑,但是其接口不能被调用者直接使用.

适配器(Adapter):适配器,Adapter实现了Target接口,并包装了一个Adaptee对象.Adapter在实现Target接口中的方法时,会将调用委托给Adaptee对象的相关方法,由Adaptee完成具体业务.

## 使用场景

**应用程序需要复用现有的类,但接口不能被该应用程序兼容,则无法直接使用.这种场景下就适合使用适配器模式实现接口的适配,从而完成组件的复用**

例子: 用电器做例子，笔记本电脑的插头一般都是三相的，即除了阳极、阴极外，还有一个地极。而有些地方的电源插座却只有两极，没有地极。电源插座与笔记本电脑的电源插头不匹配使得笔记本电脑无法使用。这时候一个三相到两相的转换器（适配器）就能解决此问题，而这正像是本模式所做的事情 

类适配器 使用到了多重继承 不适合java 或者使用继承被适配类,实现目标接口来使用

对象适配器 使用接口实现和组合对象的方式进行实现,可以使用到组合对象的子类也可以进行使用.也可以使用多实现方式,少用.依赖过多

缺省适配器 实现目标接口给定默认实现,对于被适配者可以指定特殊的某几个方法的特殊实现.其他使用默认实现.

## 好处

复用现有组件.很明显,适配器模式是通过听Adapter的方式完成接口的适配,实现了程序复用Adaptee的需求,避免了修改Adaptee实现接口,这符合"开放-封闭原则",当有新的Adaptee需要被复用时,只要添加新的Adapter即可,这也是符合"开放-封闭"原则的.

## 缺点

当程序中存在过多的适配器时,会让程序显得非常复杂,增加了把握住核心业务逻辑的难度,例如:程序调用了接口A,却在又被适配成了接口B,如果程序中需要大量的适配器,则不再优先考虑 使用适配器模式,而是考虑将系统进行重构,这就需要设计人员进行权衡.

## 总结

### 三种实现方式

　　（1）当希望将一个类转换为满足另一个新接口(目标接口)的类时,可以使用**类的适配器模式**,创建一个新类,继承原有的类,实现目标接口即可

　　（2） 当希望将一个对象转换成满足另一个新接口(目标接口)的对象时,可以创建一个适配器类,持有原类的一个实例,在适配器类的方法中,调用原实例的方法或者添加某些处理逻辑进行适配

　　（3）当不希望实现一个接口中所有的方法时,可以创建一个抽象类Adapter,默认实现所有方法,我们写别的类的时候,继承抽象类即可,可以指定特殊的实现

### 举例:

java IO流操作中使用了类适配器模式:

 （1）java.io.InputStreamReader（该类继承了Read类，但要创建它的对象必须在构造函数中传入一个InputStream）(InputStream→Reader 字节到字符)
（2）java.io.OutputStreamWriter(OutputStream) 

对象适配器模式:mybatis源码日志模块用到

默认适配器模式: Java GUI编程中有着大量的应用 